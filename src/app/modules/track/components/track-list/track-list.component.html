<div class="tracklist-header">
    <div class="album-details">
      <h2>{{album}}</h2>
      <span class="artist">{{artist}}</span>
      <div class="track-info-container">
        <span class="track-info track-count">{{trackCount}} tracks</span>
        <span class="track-info add-track" (click)="addTrackModal()"><mat-icon>add</mat-icon> Add a Track</span>
      </div>
    </div>
    <span *ngIf="!loading; else imgLoading" class="cover-container">
      <span class="edit-artwork" *ngIf="loggedIn$ | async">
        <span>
          <button *ngIf="coverFile" mat-icon-button aria-label="Save artwork" (click)="saveAlbum()">
            <mat-icon>save</mat-icon>
          </button>
        </span>
        <span>
          <button mat-icon-button aria-label="Edit artwork" (click)="openEditModal()">
            <mat-icon>edit</mat-icon>
          </button>
        </span>
      </span>
      <img *ngIf="tempCoverArt; else coverArtwork" [src]="tempCoverArt" [alt]="selectedAlbum?.title">
      <ng-template #coverArtwork>
        <img [src]="coverArt" [alt]="selectedAlbum?.title">
      </ng-template>
    </span>
    <ng-template #imgLoading>
      <span *ngIf="loading" class="img-loading">
        <mat-spinner diameter="30"></mat-spinner>
      </span>
    </ng-template>
</div>

<div class="tracklist-container">
  <mat-list role="list" *ngIf="tracksResponse">
    <mat-list-item role="listitem" *ngFor="let track of tracks">
      <app-track
        [track]="track"
        [playing]="currentTrack === track.name"
        [downloadLink]="getDownloadLink(track)"
        (trackEdit)="openTrackModal(track)"
        (trackSelected)="selectTrack(track)"
        (trackQueued)="queueTrack(track)">
      </app-track>
    </mat-list-item>
  </mat-list>
</div>
